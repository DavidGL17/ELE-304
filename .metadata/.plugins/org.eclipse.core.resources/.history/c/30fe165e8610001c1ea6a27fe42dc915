/*
 * message_sending.c
 *
 *  Created on: 4 sept. 2021
 *      Author: xxpow
 */

#include "message_sending.h"
#include "stm32h7xx_it.h"

//Override definition of both functions that are called when SEV interrupt is received
#ifdef CORE_CM7
void CM4_SEV_handler(void) { //received by CM7 when sev called by CM4
	//nothing yet
}
#else
void CM7_SEV_handler(void) {	//received by CM4 when sev called by CM7
	switch (*message_info_ptr) {	//specific behaviour depending on the message received
	case CORE_MESSAGE_CM7_CM4_NEW_PRINT:
		PRINTF("");	//TODO add in the printf the content of the buffer given by cm7
		break;
	default:
		break;
	}
}
#endif
bool messageSendingInit() {
	//TODO init le reste des attributs n√©cessaires pour l'envoi de messages
}

bool checkMessageValue(uint32_t message);	//checks if the message is a defined message

void sendMessage(uint32_t message, void *args ...) {
	while (!message_sending_ready) {
		//wait for message_sending to be ready
	}
	message_sending_ready = 0;
	switch (message) {
	case
}
*message_info_ptr = message;
}

